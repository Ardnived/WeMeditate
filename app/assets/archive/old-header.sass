@import "../../mixins/*"

/* HEADER
  Styling for the site-wide header that is used at the very top of each page.
  */

header.header
  position: relative
  z-index: $z-header

  *
    transition: all 0.2s ease

.header-container
  height: auto
  background: white
  z-index: $z-header


// ===== BANNER ===== //
// This is the decorative part of the header which is above the navigation bar
.header-banner
  display: flex
  justify-content: space-between
  align-items: flex-end

  position: relative
  font-size: 0.875em
  text-align: center

  height: 138px
  padding-bottom: 38px
  border-bottom: 1px solid $color-graphic-normal

  > a
    color: $color-header
    font-weight: $font-medium
    text-decoration: none
    font-size: 1.4rem
    line-height: 1.15
    letter-spacing: 1px
    z-index: 1

  &-logo
    width: 70px
    text-align: left

    svg
      height: 13px
      width: auto
      display: block
      margin-bottom: 4px

    span
      display: block
      font-weight: $font-medium
      font-size: 1.4rem
      line-height: 1.1

    path
      stroke: $color-header

  &-action
    max-width: 80px
    text-align: right

  &-burger
    cursor: pointer

    svg
      height: 100%

  &-illustration
    position: absolute
    left: 0
    right: 0
    top: 15px
    z-index: 0

    svg
      height: 100px
      max-width: 65%

    path
      stroke: $color-header


// ===== NAVIGATION BAR ===== //
// This is the bar with the core navigation links
.header-bar
  display: flex
  justify-content: space-around
  align-items: center
  position: relative

  font-size: 1em
  border-bottom: 1px solid $color-graphic-normal
  z-index: 1

  @include laptop-or-larger
    padding: 0 85px

  &-item
    width: 25%
    text-align: center

    > *
      text-align: left

    > a
      color: $color-text-dark
      padding: 0 2.6rem
      line-height: 3.5rem

      &:hover
        color: $color-text-darkest

    &:not(:hover):not(:focus) > .header-dropdown:not(:hover)
      max-height: 0

// ===== DESKTOP NAVIGATION BAR ===== //
// Styling variations for the desktop version of the navigation bar
.desktop.header-wrap
  @include tablet-or-smaller
    display: none !important

  .header-bar
    &-icon
      position: absolute
      text-align: center
      top: 0
      bottom: 0
      opacity: 0

    &-icon.logo
      width: 50px
      padding: 9px
      left: 0

      svg
        width: 24.5px
        height: 18px

      path
        fill: $color-text-dark

    &-icon.marker
      width: 40px
      padding: 6.2px 0
      right: 0

      svg
        width: 19px
        height: 24px

      path
        fill: $color-text-normal

// ===== MOBILE NAVIGATION BAR ===== //
// Styling variations for the mobile version of the navigation bar
.mobile.header-wrap
  padding: 0 $gutter-width

  @include laptop-or-larger
    display: none !important

  .header-bar
    height: 70px
    justify-content: space-between

    &-icon path
      fill: $color-graphic-dark

    &-icon.logo svg
      height: 30px

    &-icon.burger svg
      height: 30px
      width: 30px


// ===== DROPDOWN ===== //
// Some items in the navigation bar may have a dropdown box with more links and featured articles.
.header-dropdown
  @include overlay(102%, auto, 0, 0)
  position: absolute
  background: $background-gray
  padding: 0
  z-index: 10
  transition: max-height 0.5s cubic-bezier(.02, .01, .47, 1)
  transition-delay: 0.3s
  overflow: hidden
  max-height: 500px

  // This creates the background pattern for the dropdown
  &:before
    content: ''
    position: absolute
    top: 0
    right: 0
    height: 100%
    min-height: 380px
    width: 1250px
    max-width: 90%
    background: image-url("header/menu-background.png") no-repeat top right
    background-size: 100% 100%

  &-title,
  &-content
    padding-left: 80px
    padding-right: 20px

    @include desktop
      padding-left: 92px

    @include tablet
      padding-left: 30px

  &-title
    font-size: 1.5em
    color: $color-text-dark
    border-bottom: 1px solid $color-graphic-dark
    line-height: 58px
    margin: 0
    position: relative

  &-content
    display: flex
    align-items: flex-start
    justify-content: space-between
    position: relative
    padding-bottom: 18px

  &-list
    flex-shrink: 0
    width: 30%
    margin: 33px 0 20px

    > li > a
      display: block
      margin-bottom: 10px
      line-height: 21px
      font-size: 1.125em
      font-weight: $font-medium
      color: $color-text-normal

      &:hover
        color: $color-text-blue

// The featured articles that may be included inside a dropdown
.header-featured
  margin-left: 18px
  flex-grow: 1

  &-wrap
    display: flex
    flex: 1 1 auto
    max-width: 640px

  &-title
    position: absolute
    bottom: 100%
    margin-bottom: 1em
    font-size: 0.75em
    line-height: 1.75em

  a
    position: relative
    display: flex
    justify-content: center
    align-items: flex-start
    overflow: hidden
    background-position: center
    font-weight: $font-semibold
    font-size: 1.8rem
    max-width: 100%

    &:not(:hover) > .header-featured-overlay
      opacity: 0

  img
    width: 100%
    height: auto
    display: block

  &-overlay
    @include overlay(0, 0, 0, 0)
    transition: all 0.5s ease
    background-color: rgba(0,0,0,0.5)
    color: white
    text-align: center

    display: flex
    align-items: center
    justify-content: center

    padding: 0 15%

    &:after
      content: ''
      display: block
      position: absolute
      bottom: 16px
      left: 50%
      margin-left: -35.5px

      width: 71px
      height: 16px

      background: image-url('graphics/lotus-decoration.svg') center


// ===== SCROLLSPY ===== //
// The progress bar that appears just under the header.
#header-scrollspy
  display: none
  width: 100%
  background: white

  &-progress
    height: $scrollspy-width
    background-color: $color-scrollspy
    transition: width 0.1s linear


// ===== BREADCRUMBS ===== //
// The page breadcrumbs that appear just under the header.
.header-breadcrumbs
  position: absolute
  width: 100%
  font-size: 1.2rem
  line-height: 1.6667
  margin-top: 34px

  @include mobile
    display: none

  @include laptop-or-larger
    margin-top: 21px

  &-item
    display: inline-block

    &:not([href])
      color: black

    &:not(:last-child)::after
      font-family: $wemeditate-icons !important
      content: $icon-breadcrumb
      margin: 0 0.9em
      font-size: 0.5em

.inverse.header-breadcrumbs .header-breadcrumbs
  &-item
    color: $color-text-lighter

    &:not([href])
      color: $color-text-normal


// ===== MOBILE MENU ===== //
// This is the overlay menu that can be opened on mobile versions of the header
.header-menu
  display: flex
  flex-direction: column
  justify-content: center
  align-items: center
  text-align: center

  position: fixed
  top: 0
  bottom: 0
  left: 0
  right: 0

  height: 0
  overflow: hidden
  transition: height 0.5s ease
  background: $background-white

  &-item
    width: 100%

    > a
      width: 100%
      font-size: 1.8rem
      line-height: 4
      transition: all 0.3s ease
      color: $color-text-dark

      &.active
        color: $color-text-darkest

  &-logo
    opacity: 0

  // The "burger" button, is the button that opens and closes the menu.
  &-burger
    position: relative
    top: 0

    &:before, &:after
      content: ""
      position: absolute
      background-color: #555
      top: 15px
      left: 0
      right: 0
      transition: all .5s ease
      width: 30px
      height: 1px
      margin: 0 auto

    &:before
      transform: rotateZ(.7854rad)

    &:after
      transform: rotateZ(-.7854rad)

    svg
      opacity: 0

// ===== MOBILE SUBMENU ===== //
// Some items in the mobile menu may open up to show more links.
// This corresponds to the dropdown which is used on the desktop version of the menu.
.header-menu-item.submenu
  > a
    padding-right: 25px
    position: relative

  > a:after
    content: ''
    position: absolute
    display: inline-block
    right: 0
    top: 50%

    width: 8px
    height: 8px

    border-left: 1px solid $color-text-normal
    border-bottom: 1px solid $color-text-normal
    transform: rotate(-45deg)
    margin-top: -7px

  > a:hover
    @include laptop-or-larger
      color: $color-text-light

  > ul
    max-height: 0
    overflow: hidden
    margin: 0

  > ul > li > a
    line-height: 2em

    &:hover
      color: $color-text-normal

  // The expand class signals that the submenu is open.
  &.expand
    background: gradient(to right, $color-gradient-blue)

    > a:after
      transform: rotate(135deg)
      margin-top: -4px

    > ul
      max-height: 300px
      margin-bottom: 1em

// ===== SHOW MOBILE MENU TWEAKS ===== //
// When the mobile menu is open, some other parts of the header need to be adjusted.
.header.show-menu .header
  &-menu
    height: 100%

    @include laptop-or-larger
      display: none

  &-bar
    border-bottom: 1px solid transparent

  &-bar-icon.burger
    cursor: pointer
    position: relative
    top: 0

    svg
      opacity: 0

    &:before, &:after
      content: ""
      position: absolute
      background-color: $color-graphic-normal
      top: 15px
      left: 0
      right: 0
      transition: all 0.5s ease
      width: 30px
      height: 1px
      margin: 0 auto

    &:before
      transform: rotateZ(.7854rad)

    &:after
      transform: rotateZ(-.7854rad)


// ===== STICKY HEADER ===== //
// When the user scrolls down the page, the header should collapse and attach itself to the top of the page (triggered using javascript)
// When that happens the header is said to be "sticky", and the following CSS rules are applied
.sticky.header
  .mobile .header-bar
    height: 50px + $scrollspy-width

  .header
    &-banner,
    &-breadcrumbs
      display: none !important

    &-container
      position: fixed
      top: 0
      left: 0
      right: 0

    &-bar-icon
      opacity: 1

  #header-scrollspy
    display: block


// ===== INVERSE HEADER ===== //
// Some pages use a background image at the top of the page
// In such cases the header needs to be bright on a dark background.
.inverse.header:not(.show-menu) .header
  &-container
    background: transparent

  &-banner > a,
  &-bar-item > a
    color: $color-text-inverse

    &:not(.active):hover
      opacity: 0.75

  &-banner
    border-color: $color-text-inverse

    &-logo path,
    &-illustration path
      stroke: $color-text-inverse

    &-burger path,
    &-logo path
      fill: $color-text-inverse

  &-bar
    border-color: $color-text-inverse

    &-icon.burger path
      stroke: $color-text-inverse

    &-icon.logo path,
    &-icon.marker path
      fill: $color-text-inverse

  &-breadcrumbs-item
    color: $color-text-lighter

    &:not([href])
      color: $color-text-normal
